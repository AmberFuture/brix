class BrixBtnSettings{constructor(){this.container=document.querySelector(".pagetitle-align-right-container")??document.querySelector(".ui-toolbar-right-buttons"),this.container&&this.btnCreate()}btnCreate(){var e=document.createElement("button"),t=document.createElement("span"),n=document.createElement("span");e.classList.add("ui-btn","ui-btn-light-border","ui-icon-set__scope","ui-btn-themes"),e.classList.add("--air","ui-btn-no-caps","ui-btn-sm","ui-btn-icon-copy"),e.classList.add("--with-left-icon","--style-outline","ui-btn-collapsed"),e.setAttribute("title",BX.message("BRIX_LINKEDTASKFIELDS_JS_BTN_TITLE")),t.classList.add("ui-btn-text"),n.classList.add("ui-btn-text-inner"),t.prepend(n),e.prepend(t),this.container.prepend(e),e.addEventListener("click",()=>{this.open()})}open(){let t="/bitrix/tools/brix-linkedtaskfields/list.php";BX.SidePanel.Instance.open(t,{width:1830,allowChangeHistory:!1,cacheable:!1,requestMethod:"get",events:{onMessage:function(e){"linked-reload"===e.eventId&&BX.SidePanel.Instance.getSlider(t).reload()}}}),BX.addCustomEvent("SidePanel.Slider:onDestroyComplete",e=>{e.getSlider().getUrl()===t&&document.querySelectorAll(".brix-linked-modal")&&document.querySelectorAll(".brix-linked-modal").forEach(e=>{e.remove()})})}}document.addEventListener("DOMContentLoaded",()=>{new BrixBtnSettings});