class BrixLinkedList{static createModal(){new BrixLinkedModal({data:{classModal:"brix-linked-list__modal",title:BX.message("BRIX_LINKED_LIST_TITLE"),text:"T",buttons:[`<button class="brix-linked-list__modal-delete ui-btn ui-btn-md ui-btn-danger-dark">${BX.message("BRIX_LINKED_LIST_OK")}</button>`,`<button class="brix-linked-list__modal-close ui-btn ui-btn-md ui-btn-link">${BX.message("BRIX_LINKED_LIST_CANCEL")}</button>`]},selectorClose:".brix-linked-list__modal-close",maxWidth:400,clickOut:!0}),window.parent.document.querySelector(".brix-linked-list__modal-delete").addEventListener("click",()=>{var e=window.parent.document.querySelector(".brix-linked-list__modal"),t=JSON.parse(e.getAttribute("data-fieldNames")),e=e.getAttribute("data-all");BX.ajax.runAction("brix:linkedtaskfields.linked.delete",{data:{fieldNames:t,all:e}}).then(e=>{window.parent.document.querySelector(".brix-linked-list__modal").close();var t=BX.SidePanel.Instance.getTopSlider();t&&t.reload()},e=>{window.parent.document.querySelector(".brix-linked-list__modal").click(),console.error(e),e.error?alert(e.error):alert("An error has occurred")})})}static openSlider(e=""){BX.SidePanel.Instance.open("/bitrix/tools/brix-linkedtaskfields/element.php?FIELD_NAME="+e,{cacheable:!1,width:1333})}static update(e,t="Y"){BX.ajax.runAction("brix:linkedtaskfields.linked.update",{data:{fieldName:e,fields:{ACTIVE:t},activity:!0}}).then(e=>{var t=BX.SidePanel.Instance.getTopSlider();t&&t.reload()},e=>{console.error(e),e.error?alert(e.error):alert("An error has occurred")})}static updateMulti(e="Y"){var t=this.checkElements();BX.ajax.runAction("brix:linkedtaskfields.linked.updateMulti",{data:{fields:{ACTIVE:e},fieldNames:t.selected,all:t.all}}).then(e=>{var t=BX.SidePanel.Instance.getTopSlider();t&&t.reload()},e=>{console.error(e),e.error?alert(e.error):alert("An error has occurred")})}static delete(e,t="",l="N"){let a=BX.message("BRIX_LINKED_LIST_TEXT_MULTI");""!==t&&(a=BX.message("BRIX_LINKED_LIST_TEXT").replace("#FIELD#",t)),"string"==typeof e&&(e=[e]),window.parent.document.querySelector(".brix-linked-list__modal").setAttribute("data-all",l),window.parent.document.querySelector(".brix-linked-list__modal").setAttribute("data-fieldNames",JSON.stringify(e)),window.parent.document.querySelector(".brix-linked-list__modal .brix-linked-modal__text").textContent=a,window.parent.document.querySelector(".brix-linked-list__modal").showModal()}static deleteMulti(){var e=this.checkElements();this.delete(e.selected,"",e.all)}static checkElements(){var e=BX.message("BRIX_LINKED_LIST_GRID_ID");let t=BX.Main.gridManager.getInstanceById(e),l=t.getRows().getSelectedIds(),a=document.getElementById("actallrows_"+e),r="N";return{selected:l,all:r=a&&a.checked?"Y":r}}}