class BrixLinkedModal{constructor(t={}){this.dataCreate=t.data??{},this.showInParent=t.showInParent??!0,this.modal=!!t.selector&&document.querySelector(t.selector),this.selectorShow=t.selectorShow??!1,this.selectorClose=t.selectorClose??!1,this.maxWidth=t.maxWidth??!1,this.modalOpen=t.modalOpen??!0,this.clickOut=t.clickOut??!1,this.escapeEvents=t.escapeEvents??!0,0<Object.keys(this.dataCreate).length?this.modalCreate():this.modal&&this.settings()}modalCreate(){var t=this.dataCreate.id??"",e=this.dataCreate.classModal??"",a=this.dataCreate.title??"",s=this.dataCreate.text??"",d=this.dataCreate.buttons??[],i=this.dataCreate.btnCenter??!1,o=document.createElement("dialog"),n=document.createElement("div");if(o.classList.add("brix-linked-modal"),n.classList.add("brix-linked-modal__container"),this.modalOpen||o.classList.add("brix-linked-modal--nomodal"),""!==t&&o.setAttribute("id",t),""!==e&&o.classList.add(e),document.body.append(o),o.append(n),""!==a&&((e=(t=/<\/?[a-z][\s\S]*>/i.test(a))?document.createElement("div"):document.createElement("p")).classList.add("brix-linked-modal__title"),t?(t=document.createRange().createContextualFragment(a)).append(t):e.textContent=a,n.append(e)),""!==s&&((a=(t=/<\/?[a-z][\s\S]*>/i.test(s))?document.createElement("div"):document.createElement("p")).classList.add("brix-linked-modal__text"),t?(e=document.createRange().createContextualFragment(s),a.append(e)):a.textContent=s,n.append(a)),0<d.length){let e=document.createElement("div");e.classList.add("brix-linked-modal__buttons"),e.style.cssText=`--brixModalBtnCount: ${d.length};`,i&&e.classList.add("brix-linked-modal__buttons--center"),n.append(e),d.forEach(t=>{t=document.createRange().createContextualFragment(t);e.append(t)})}this.modal=o,this.settings()}settings(){if(this.modal){if(this.maxWidth&&0<Number(this.maxWidth)&&(this.modalOpen?this.modal.style.maxWidth=this.maxWidth+"px":this.modal.querySelector(".brix-linked-modal__container").style.maxWidth=this.maxWidth+"px"),this.modal.getAttribute("id"))this.id=this.modal.getAttribute("id");else{for(this.id=Math.random().toString(36).substring(2,10);document.getElementById(""+this.id);)this.id=Math.random().toString(36).substring(2,10);this.modal.setAttribute("id",this.id)}this.showInParent&&(window.parent.document.body.append(this.modal),delete this.modal,this.modal=window.parent.document.getElementById(this.id)),this.events()}}events(){let e=this;this.modal&&(this.selectorShow&&document.querySelector(this.selectorShow)&&document.querySelector(this.selectorShow).addEventListener("click",()=>{e.modalOpen?e.modal.showModal():e.modal.show()}),this.selectorClose&&this.modal.querySelector(this.selectorClose)&&this.modal.querySelector(this.selectorClose).addEventListener("click",()=>{e.modal.close()}),BX.addCustomEvent("SidePanel.Slider:onCloseByEsc",t=>{e.modal.open&&(t.denyAction(),e.modal.close())}),this.modalOpen&&this.clickOut&&(this.showInParent?window.parent.document:document).addEventListener("click",t=>{e.modal.open&&t.target.classList.contains("brix-linked-modal")&&e.modal.close()}),this.escapeEvents)&&window.parent.document.addEventListener("keyup",function(t){"Escape"!==t.key&&"Escape"!==t.code&&27!==t.keyCode||e.modal.open&&e.modal.close()})}}